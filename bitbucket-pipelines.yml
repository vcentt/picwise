image: node:18.14.2
pipelines:
  default:
    - step:
        name: env
        script:
          - cd frontend
          - export NETLIFY_AUTH_TOKEN=$NETLIFY_AUTH_TOKEN
          - export NETLIFY_SITE_ID=$NETLIFY_SITE_ID
    - step:
        name: Build Frontend
        script:
          - cd frontend          
          - npm install -g netlify-cli
          - npm install
          - npm run build
          - netlify deploy --dir=./build --auth=${{ env.NETLIFY_AUTH_TOKEN }} --site=${{ env.NETLIFY_SITE_ID }}
